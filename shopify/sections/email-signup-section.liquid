{%- assign _section = section.settings -%}
<div class="email-signup js-form-subscribe-wrapper">
  <div class="email-signup--inner lazyload"
    data-bgset="{% include 'responsive-bg-image', image: _section.back_img %}"
    style="padding-bottom: calc(1 / {{ _section.back_img.aspect_ratio }} * 100% ); background-image: url('{{ _section.back_img | img_url: '300x' }}');"
  >
    <div class="email-signup--form hidden-xs">
      {%- if _section.form_title != blank -%}
        <h2 class="signup-form--title">{{ _section.form_title }}</h2>
      {%- endif -%}
      <form class="signup-form--form js-form-subscribe" id="signup-section-{{ section.id }}-desktop">
        <div class="form-group js-form-subscribe-input">
          <input type="hidden" name="g" value="{{ _section.list_id }}">
          <input type="hidden" name="$list_fields" value="$consent">
          <input type="text" name="email" placeholder="Enter your email address" />
          <button>{% include 'icon', type: "arrow-right" %}</button>
        </div>
        <div class="form-group js-form-subscribe-message hidden">
          <p>Thanks for your subscription!</p>
        </div>
      </form>
    </div>
  </div>
  <div class="email-signup--form visible-xs-block">
    {%- if _section.form_title != blank -%}
      <h2 class="signup-form--title">{{ _section.form_title }}</h2>
    {%- endif -%}
    <form class="signup-form--form js-form-subscribe" id="signup-section-{{ section.id }}-desktop">
      <div class="form-group js-form-subscribe-input">
        <input type="hidden" name="g" value="{{ _section.list_id }}">
        <input type="hidden" name="$list_fields" value="$consent">
        <input type="text" name="email" placeholder="Enter your email address" />
        <button type="submit" class="klaviyo_submit_button">{% include 'icon', type: "arrow-right" %}</button>
      </div>
      <div class="form-group js-form-subscribe-message hidden">
        <p>Thanks for your subscription!</p>
      </div>
    </form>
  </div>
</div>
{% schema %}
  {
    "name": "Email Signup",
    "settings": [
      {
        "type": "image_picker",
        "id": "back_img",
        "label": "Background Image"
      },
      {
        "type": "header",
        "content": "Signup Form"
      },
      {
        "type": "text",
        "id": "form_title",
        "label": "Form Title"
      },
      {
        "type": "text",
        "id": "list_id",
        "label": "List Id",
        "info": "Klaviyo List Id"
      }
    ],
    "presets": [
      {
        "name": "Email Signup",
        "category": "Contact"
      }
    ]
  }
{% endschema %}